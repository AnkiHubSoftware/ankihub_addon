image:
  file: .gitpod.Dockerfile

tasks:
  - init: >
      pyenv local 3.9.13
    env:
      ANKIHUB_APP_URL: "https://staging.ankihub.net"
      ANKIDEV: 1
      DEVELOPMENT: True
      ANKI_BASE: "/workspace/ankihub_addon/tests/test_data/Anki2"
    command: >
      python3 scripts/build.py && anki

github:
  prebuilds:
    addBadge: true

vscode:
  extensions:
    - almenon.arepl
    - ms-python.python
    - littlefoxteam.vscode-python-test-adapter

ports:
  - port: 6080
    visibility: public
  - port: 5900
    onOpen: ignore
