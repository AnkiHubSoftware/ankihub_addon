<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

<script>
    // Replace with your own token
    const knox_token = "9c253b471e41a6a213fb52e3f72d4ac2c4d510f5fa7da1e0acb5b7bcb24c7ac4";

    // Replace this with your own app url
    const appUrl = "http://localhost:8000"

    // Replace the deck id with your own deck id
    const targetUrl = (
        `${appUrl}/ai/js-python-bride/`
    )

    const iframe = document.createElement("iframe");
    iframe.id = "ankihub"
    iframe.src = `${appUrl}/ai/embed_auth?next=${encodeURIComponent(targetUrl)}`
    iframe.width = "100%"
    iframe.height = "500px"
    iframe.style.border = "none"

    // Hide scrollbar of iframe
    iframe.style.overflow = "hidden"
    iframe.scrolling = "no"

    iframe.onload = function () {
        iframe.contentWindow.postMessage(knox_token, appUrl);
        console.log("Message sent to iframe");
    }

    window.addEventListener("message", function (event) {
        if (event.origin === appUrl) {
            const message = event.data;
            console.log(`Message received from iframe: ${message}`);
            pycmd(message)
        }
    });

    document.body.appendChild(iframe)
</script>

</body>

</html>
